<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>大容量回線ソフトバンク光10GでIPv6,IPv4の自宅サーバ運用をしてみた - 塩の惑星</title><meta name="description" content="ソフトバンク光10Gを契約しました。このプランはなんと最大10Gbpsの転送速度でインターネットにアクセスできる仕組みになっています。 実際に計測した感じでは3Gbps程度しか出ないですが、多少お金を追加するだけで1Gbps超えできるので満足しています。 自宅サーバといっても不特定多数の人にサービスを提供するようなものすごい物ではありません。 私は、外からNAS（ファイルサーバ）にアクセスしたり、知り合いと遊ぶゲームサーバなどの用途で自宅サーバを運用することが多いです。 Project&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://corkborg.github.io/home-server-with-softbank-hikari-10g/"><link rel="alternate" type="application/atom+xml" href="https://corkborg.github.io/feed.xml" title="塩の惑星 - RSS"><link rel="alternate" type="application/json" href="https://corkborg.github.io/feed.json" title="塩の惑星 - JSON"><meta property="og:title" content="大容量回線ソフトバンク光10GでIPv6,IPv4の自宅サーバ運用をしてみた"><meta property="og:image" content="https://corkborg.github.io/media/posts/46/DSC_1877_02.JPG"><meta property="og:image:width" content="1000"><meta property="og:image:height" content="687"><meta property="og:site_name" content="塩の惑星"><meta property="og:description" content="ソフトバンク光10Gを契約しました。このプランはなんと最大10Gbpsの転送速度でインターネットにアクセスできる仕組みになっています。 実際に計測した感じでは3Gbps程度しか出ないですが、多少お金を追加するだけで1Gbps超えできるので満足しています。 自宅サーバといっても不特定多数の人にサービスを提供するようなものすごい物ではありません。 私は、外からNAS（ファイルサーバ）にアクセスしたり、知り合いと遊ぶゲームサーバなどの用途で自宅サーバを運用することが多いです。 Project&hellip;"><meta property="og:url" content="https://corkborg.github.io/home-server-with-softbank-hikari-10g/"><meta property="og:type" content="article"><link rel="shortcut icon" href="https://corkborg.github.io/media/website/icon.ico" type="image/x-icon"><link rel="stylesheet" href="https://corkborg.github.io/assets/css/prism.css?v=b46352844c4922bafa71c2012d20bbac"><link rel="stylesheet" href="https://corkborg.github.io/assets/css/style.css?v=5906b9237aeb49f8388a8eb5943bf602"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://corkborg.github.io/home-server-with-softbank-hikari-10g/"},"headline":"大容量回線ソフトバンク光10GでIPv6,IPv4の自宅サーバ運用をしてみた","datePublished":"2024-06-12T22:31+09:00","dateModified":"2025-10-03T21:42+09:00","image":{"@type":"ImageObject","url":"https://corkborg.github.io/media/posts/46/DSC_1877_02.JPG","height":687,"width":1000},"description":"ソフトバンク光10Gを契約しました。このプランはなんと最大10Gbpsの転送速度でインターネットにアクセスできる仕組みになっています。 実際に計測した感じでは3Gbps程度しか出ないですが、多少お金を追加するだけで1Gbps超えできるので満足しています。 自宅サーバといっても不特定多数の人にサービスを提供するようなものすごい物ではありません。 私は、外からNAS（ファイルサーバ）にアクセスしたり、知り合いと遊ぶゲームサーバなどの用途で自宅サーバを運用することが多いです。 Project&hellip;","author":{"@type":"Person","name":"ミズソバ","url":"https://corkborg.github.io/authors/mizusoba/"},"publisher":{"@type":"Organization","name":"ミズソバ","logo":{"@type":"ImageObject","url":"https://corkborg.github.io/media/website/logo2.png","height":344,"width":1000}}}</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-Y8CYBCM4RJ"></script><script>window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Y8CYBCM4RJ');</script></head><body><header><div id="header-upper"><div></div><a class="main-logo" href="https://corkborg.github.io/"><img src="https://corkborg.github.io/media/website/logo2.png" alt="塩の惑星" width="232px" height="80px"></a><div></div></div><div><nav class="menu-navbar"><div class="menu"><div><a href="https://corkborg.github.io/contact/" target="_self">問い合わせ</a></div></div></nav></div></header><div id="main-wrapper-with-sidebar"><main class="post-only"><article><header><h1>大容量回線ソフトバンク光10GでIPv6,IPv4の自宅サーバ運用をしてみた</h1><div class="modified-time">公開日: <time datetime="2024-06-12T22:31">2024-06-12 </time><span id="post-tags"><span class="post-tag"><a href="https://corkborg.github.io/tags/network/">ネットワーク</a></span></span></div></header><figure id="featured-image"><img src="https://corkborg.github.io/media/posts/46/DSC_1877_02.JPG" srcset="https://corkborg.github.io/media/posts/46/responsive/DSC_1877_02-xs.JPG 300w, https://corkborg.github.io/media/posts/46/responsive/DSC_1877_02-sm.JPG 480w, https://corkborg.github.io/media/posts/46/responsive/DSC_1877_02-md.JPG 749w, https://corkborg.github.io/media/posts/46/responsive/DSC_1877_02-xl.JPG 1200w" sizes="(max-width: 1200px) 100vw, 1200px" loading="eager" height="687" width="1000" alt="ソフトバンク光10GのルータとONU"><figcaption>ソフトバンク光10GでレンタルされたルータとONUです</figcaption></figure><div id="post-entry"><p>ソフトバンク光10Gを契約しました。このプランはなんと最大10Gbpsの転送速度でインターネットにアクセスできる仕組みになっています。</p><p>実際に計測した感じでは3Gbps程度しか出ないですが、多少お金を追加するだけで1Gbps超えできるので満足しています。</p><h2>自宅サーバを運用したい</h2><p>自宅サーバといっても不特定多数の人にサービスを提供するようなものすごい物ではありません。</p><p>私は、外からNAS（ファイルサーバ）にアクセスしたり、知り合いと遊ぶゲームサーバなどの用途で自宅サーバを運用することが多いです。</p><p><a href="https://corkborg.github.io/how-to-create-multiplayer-server-project-zomboid/" target="_blank" rel="noopener noreferrer">Project Zomboidのゲームサーバを立てる方法 - 塩の惑星</a></p><p>多くのプロバイダーは自宅サーバを運用できるのですが、場合によっては難しい場合があります。</p><figure class="post__image"><figure class="post__image post__image--center"><img loading="lazy" src="https://corkborg.github.io/media/posts/46/Ming-Cheng-Wei-She-Ding-huairu-1718207908216.drawio-1.png" alt="" width="1050" height="440" sizes="(max-width: 1200px) 100vw, 1200px" srcset="https://corkborg.github.io/media/posts/46/responsive/Ming-Cheng-Wei-She-Ding-huairu-1718207908216.drawio-1-xs.png 300w, https://corkborg.github.io/media/posts/46/responsive/Ming-Cheng-Wei-She-Ding-huairu-1718207908216.drawio-1-sm.png 480w, https://corkborg.github.io/media/posts/46/responsive/Ming-Cheng-Wei-She-Ding-huairu-1718207908216.drawio-1-md.png 749w, https://corkborg.github.io/media/posts/46/responsive/Ming-Cheng-Wei-She-Ding-huairu-1718207908216.drawio-1-xl.png 1200w"></figure><figcaption>このような感じを目指したい</figcaption></figure><p>色々あったのですが最終的には上記の様な形にすることができました。</p><h2>ソフトバンク光10GはIPv6接続のみだった</h2><p>インターネット接続方式にはIPv4という旧来方式と、IPv6という新しい方法があります。</p><p>IPv4のサーバにはIPv6、IPv4の回線を使っている人がアクセスできるのですが、IPv6のサーバにはIPv4の回線を使っている人はアクセスすることができません。</p><p>現在、IPv6に対応した回線は普及していないのでサーバ運用を行うにはIPv4のほうが断然便利です。</p><p>完全に調査不足だったのですがソフトバンク光10GはIPv6のみでインターネットに接続しているようでした。</p><p>IPv6のみのインターネットの回線の場合基本的にIPv6アドレスでサーバ運用することになります。<br>IPv6はそこまで普及していないので、外からアクセスすることが難しくなります（喫茶店のwifiなどがIPv6に対応してない）。</p><h2>PPPoE接続（IPv4）はできなかった</h2><p>10Gではない通常のソフトバンク光もIPv6ですがPPPoEという接続方法を使うことでIPv4だけでインターネットに接続ができるようです。</p><p><a href="https://www.softbank.jp/internet/support/sbhikari/connect/pppoe/hgw/">ホームゲートウェイ（N）のユーザー認証設定（PPPoE）をする</a></p><p>ただ、試してみたものの接続できませんでした。ソフトバンク光10GはPPPoEに対応してないのではないかと思います（多分通常のソフトバンク光と回線の提供方法が違う）。</p><h2>運良くIPv4専有のMAP-Eだった</h2><p>本来、IPv6とIPv4は相互に接続できない技術なのですが、それだと困るのでIPv6からIPv4のインターネットにアクセスするための技術がいくつかあります。</p><ul><li>DS-Lite （サーバ運用は絶望的）</li><li>MAP-E（サーバ運用ができるが専有じゃない場合は癖がある）</li></ul><p>このような技術のなかでも<strong>ソフトバンク光10GはMAP-E</strong>という技術を使用しているようです。</p><p>このMAP-EはシンプルにIPv4の通信をホームゲートウェイに中継してくれるので、残りの制御はONU側で実施します。</p><figure class="post__image post__image--center"><img loading="lazy" src="https://corkborg.github.io/media/posts/46/Ming-Cheng-Wei-She-Ding-huairu-1718208893207.drawio-2.png" alt="ソフトバンク10GのIPoEのMAP-Eについての図" width="980" height="520" sizes="(max-width: 1200px) 100vw, 1200px" srcset="https://corkborg.github.io/media/posts/46/responsive/Ming-Cheng-Wei-She-Ding-huairu-1718208893207.drawio-2-xs.png 300w, https://corkborg.github.io/media/posts/46/responsive/Ming-Cheng-Wei-She-Ding-huairu-1718208893207.drawio-2-sm.png 480w, https://corkborg.github.io/media/posts/46/responsive/Ming-Cheng-Wei-She-Ding-huairu-1718208893207.drawio-2-md.png 749w, https://corkborg.github.io/media/posts/46/responsive/Ming-Cheng-Wei-She-Ding-huairu-1718208893207.drawio-2-xl.png 1200w"></figure><p>ソフトバンク光10GはMAP-Eの中でもIPv4アドレスをまるまる専有させてくれる方式でした、そのため細かい事を無視すると<strong>IPv4、IPv6両方のアドレスがホームゲートウェイに振られている</strong>、デュアルスタックに近い状態です。</p><p>なので、割り当てられたIPv4アドレスに対してポート開放やNAT設定もホームゲートウェイ側で実施することができます。</p><p>当初IPv6で絶望しかけてましたが一転ソフトバンク光良いじゃんと思いました。</p><h3>余談: MAP-Eだけど専有じゃないプロバイダ</h3><p>同じMAP-E方式でも専有ではないプロバイダが存在します。</p><p>専有ではない場合一つのIPアドレスを複数人で使用します（最近ではNUROもこの方式に移行中とか）。</p><p>この方法では一つのIPに紐づいた6万程度のポートをいくつかに分割して、分割したポート事に人に割当を行い。MAP-Eはポートを見て通信をホームゲートウェイに送る方法です</p><p>このようなプロバイダでもサーバ運用はできなくはないのですが、ポートの割り振り方法を解析するのが難しく、うまくわかったとしても設定したいポートが使えない可能性が高かったりして使いづらいです。</p><h2>まとめ</h2><p><strong>ソフトバンク光10Gはまあまあ快適に自宅サーバ運用ができる！</strong></p><p>家電量販店の割引に目がくらんでソフトバンク光10Gに迂闊に契約してしまい、一時はIPv6周りで苦しんだのですが、サーバ運用という意味では良い結果になったのと勉強になりました。</p><p>もしも、幅広い選択肢と金銭的な余裕があった上で、サーバ運用を検討しているのであれば、サーバ運用専門のプロバイダを選ぶのが一番良いと思います。</p><p>10Gの通常回線でサーバを軽く運用したい場合、IPv6とIPv4のデュアルスタック運用のau光などが面倒が無いかもしれないです。</p><p>ただ、その他の選択肢でIPv6（IPoEという方式で回線速度が早い）とIPv4の利便性を享受したいと考えたときソフトバンク光10Gはだいぶ良いかもしれないです。</p><h2>おまけ：ソフトバンク光の詳細あたり</h2><p>一応、MAP-EでのNATの設定方法や、IPv6アドレスの割当など回線の詳細情報を載せておきます。</p><h3>IPアドレスの固定まわり</h3><p>ソフトバンク光10Gは本格的なサーバ運用者向けの回線ではないのでIPアドレスの完全固定はできないのですが、IPv6、IPv4ともにホームゲートウェイが起動している間は変わらないようです（短時間の再起動でも変更されない）。</p><p>数ヶ月使っていますが今のところ変わっていません。</p><h3>IPv6アドレスの割当</h3><p>IPv6アドレスの割当ですが/56でした。</p><h3>ソフトバンク光のMAP-Eアドレス</h3><p>IPv4アドレス専有なのでMAP-Eアドレスは非常にシンプルです。<br>割り当てられたサブネットアドレスの後ろにIPv4アドレスを16進数に変換した物がくっつきます。</p><p>たとえば2001:db8:3333:4444というサブネットに対して1.1.1.1というアドレスを専有している場合こんな感じです。</p><pre>2001:db8:3333:4444:0101:0101:0100:0000</pre><h3><span style="color: #000000;">MAP-E周りの設定方法紹介</span></h3><p>私はソフトバンクからXG-100NEというホームゲートウェイルーターをもらったので、それでMAP-E周りの設定を行う方法を紹介します。</p><p>このルータを設定変更する場合は、通常http://ntt.setupやルータに割り当てたIPアドレスにアクセスすることで管理画面にアクセスできると思います。</p><p>ただ、MAP-E周りの設定画面にはここからアクセスすることができません。</p><pre>http://ntt.setup:8888/t/</pre><p>このアドレスでアクセスするとONUに内蔵されたソフトバンク光の管理画面にアクセスすることができます。</p><figure class="post__image post__image--center"><img loading="lazy" src="https://corkborg.github.io/media/posts/46/sukurinsiyotuto-2024-06-13-1.51.46.png" alt="" width="526" height="483" sizes="(max-width: 1200px) 100vw, 1200px" srcset="https://corkborg.github.io/media/posts/46/responsive/sukurinsiyotuto-2024-06-13-1.51.46-xs.png 300w, https://corkborg.github.io/media/posts/46/responsive/sukurinsiyotuto-2024-06-13-1.51.46-sm.png 480w, https://corkborg.github.io/media/posts/46/responsive/sukurinsiyotuto-2024-06-13-1.51.46-md.png 749w, https://corkborg.github.io/media/posts/46/responsive/sukurinsiyotuto-2024-06-13-1.51.46-xl.png 1200w"></figure><p>この管理画面の中の静的マスカレード設定というところを設定することで、MAP-E経由で来た特定ポート宛の通信を固定したサーバに送ることができるようになります。</p><p>たとえば、80ポートと443ポートを固定してやるとWebサーバを運用できるようになります。</p><p> </p><p> </p></div><div class="modified-time">更新日: <time datetime="2025-10-03T21:42">2025-10-03</time></div><div class="post__share"><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fcorkborg.github.io%2Fhome-server-with-softbank-hikari-10g%2F" class="js-share facebook" title="Share with Facebook" rel="nofollow noopener noreferrer" aria-label="Share with Facebook"><svg class="u-icon"><use xlink:href="https://corkborg.github.io/assets/svg/svg-map.svg#facebook"/></svg> </a><a href="https://twitter.com/share?url=https%3A%2F%2Fcorkborg.github.io%2Fhome-server-with-softbank-hikari-10g%2F&amp;via=%E5%A1%A9%E3%81%AE%E6%83%91%E6%98%9F&amp;text=%E5%A4%A7%E5%AE%B9%E9%87%8F%E5%9B%9E%E7%B7%9A%E3%82%BD%E3%83%95%E3%83%88%E3%83%90%E3%83%B3%E3%82%AF%E5%85%8910G%E3%81%A7IPv6%2CIPv4%E3%81%AE%E8%87%AA%E5%AE%85%E3%82%B5%E3%83%BC%E3%83%90%E9%81%8B%E7%94%A8%E3%82%92%E3%81%97%E3%81%A6%E3%81%BF%E3%81%9F" class="js-share twitter" title="Share with Twitter" rel="nofollow noopener noreferrer" target="_blank" aria-label="Share with Twitter"><svg class="u-icon"><use xlink:href="https://corkborg.github.io/assets/svg/svg-map.svg#twitter"/></svg></a></div></article><div><nav id="post-navigation"><div class="post-navigation-link"><a href="https://corkborg.github.io/richoh-wg-6-on-40m-dive/" rel="prev">&larr; 前の記事: 水深20mまでのRICOH WG-6を40m級のダイビングで使うとどうなるか？</a></div><div class="post-navigation-link"><a href="https://corkborg.github.io/using-5gbe-nic-adapter-with-raspberrypi4/" rel="next">次の記事: RaspberryPi4で5GbEの高速インターネットアダプタを使ってみた &rarr;</a></div></nav></div></main><aside><section><h3>Featured posts</h3><ol class="featured-posts__list"><li><a href="https://corkborg.github.io/richoh-wg-6-on-40m-dive/" class="invert">水深20mまでのRICOH WG-6を40m級のダイビングで使うとどうなるか？</a></li><li><a href="https://corkborg.github.io/raising-ants-less-interesting/" class="invert">アリの飼育は思ったよりも面白くなかった</a></li><li><a href="https://corkborg.github.io/created-kanji-to-time/" class="invert">日本語や漢字の日付をPythonのdatetimeに変換するライブラリを作った</a></li><li><a href="https://corkborg.github.io/publii-is-good-website-generator/" class="invert">使いやすいエディターで静的サイト運営できるPubliiがおすすめな話</a></li><li><a href="https://corkborg.github.io/energy-saving-battle-gaming-pc-vs-apple-silicon-mac/" class="invert">ゲーミングPCは電気代が高い！電気代が安いApple Silicon Macのゲームでの省電力能力を検証</a></li></ol></section></aside></div><footer><nav class="menu-navbar"><div class="menu"><div><a href="https://corkborg.github.io/contact/" target="_self">問い合わせ</a></div></div></nav><div id="footer-lower"><div></div><a class="main-logo" href="https://corkborg.github.io/"><img src="https://corkborg.github.io/media/website/logo2.png" alt="塩の惑星" height="80px"></a><div></div></div></footer><script defer="defer" src="https://corkborg.github.io/assets/js/prism.js?v=2730b884bcd782a7b6ffd13dcb5504c0"></script><script async src="https://corkborg.github.io/assets/js/scripts.js?v=3733efd39cd6c799b95c8fcb96993840"></script></body></html>